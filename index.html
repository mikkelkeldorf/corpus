<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Daily Corporate “Inspiration” — Subscribe</title>
  <style>
    :root { --bg:#0b0b10; --card:#141622; --text:#e8e8ee; --muted:#a6a8b3; --ok:#20c997; --err:#ff6b6b; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:16px/1.45 system-ui,Segoe UI,Roboto,Helvetica,Arial}
    .wrap{max-width:720px;margin:8vh auto;padding:24px}
    .card{background:var(--card);border-radius:16px;padding:28px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    h1{margin:0 0 6px;font-size:28px} p{color:var(--muted)}
    form{display:flex;gap:12px;margin-top:16px;flex-wrap:wrap}
    input[type=email]{flex:1;min-width:260px;padding:14px 16px;border-radius:12px;border:1px solid #252a3a;background:#0f1120;color:var(--text)}
    button{padding:14px 18px;border:0;border-radius:12px;background:#4f46e5;color:#fff;font-weight:600;cursor:pointer}
    small{display:block;margin-top:10px;color:var(--muted)}
    .note{margin-top:14px;font-size:14px}
    .hidden{display:none}
    .msg{margin-top:12px;padding:12px 14px;border-radius:10px}
    .ok{background:rgba(32,201,151,.12);border:1px solid rgba(32,201,151,.5)}
    .err{background:rgba(255,107,107,.12);border:1px solid rgba(255,107,107,.5)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Daily Corporate “Inspiration”</h1>
      <p>Get a sarcastic, intellectually humorous corporate-nonsense quote on weekdays at 08:00.</p>

      <form id="signup">
        <input id="email" type="email" placeholder="you@company.com" required />
        <!-- honeypot -->
        <input name="website" class="hidden" autocomplete="off" tabindex="-1" />
        <button type="submit">Subscribe</button>
      </form>

      <div id="msg" class="msg hidden"></div>
      <small class="note">You can unsubscribe anytime.</small>
    </div>
  </div>

  <script>
    const f = document.getElementById('signup');
    const msg = document.getElementById('msg');
    f.addEventListener('submit', async (e) => {
      e.preventDefault();
      msg.className = 'msg'; msg.textContent = '';
      const email = document.getElementById('email').value.trim();
      const website = new FormData(f).get('website'); // honeypot
      try {
        const res = await fetch('/api/subscribe', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({ email, website })
        });
        const j = await res.json();
        if(res.ok){
          msg.textContent = "Check your inbox for a confirmation email.";
          msg.classList.add('ok'); 
        } else {
          msg.textContent = j.error || "Something went wrong. Please try again.";
          msg.classList.add('err');
        }
      } catch {
        msg.textContent = "Network error. Please try again.";
        msg.classList.add('err');
      }
      msg.classList.remove('hidden');
      f.reset();
    });
  </script>
</body>
</html>
